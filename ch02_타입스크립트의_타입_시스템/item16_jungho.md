# 아이템 16 number 인덱스 시그니처보다 Array, 튜플, ArrayLike 사용하기

자바스크립트에서 객체의 키값은 항상 문자열만 올 수 있다.

하지만 배열은 분명히 객체이지만 숫자로 인덱싱 할 수 있다.

```tsx
const x = [1, 2, 3];

console.log(x[0]); // 1
```

```tsx
Object.keys(x); // ['0', '1', '2']
```

하지만 실제로 배열의 키를 나열하면 키가 문자열로 출력된다.

> 실제로 자바스크립트의 배열은 배열이 아닌 객체로 배열의 동작을 흉내낸 객체이기 때문이다.
>
> 참고 : [https://poiemaweb.com/js-array-is-not-arrray](https://poiemaweb.com/js-array-is-not-arrray)

<br/>

타입스크립트는 위의 혼란을 바로잡기 위해, **_숫자 키를 허용_**하고 문자열 키와 다른 것으로 인식한다.

```tsx
interface Array<T> {
  [n: number]: T;
}
```

이를 통해 타입 체크 시점에 오류를 잡아준다.(인덱스 시그니처로 사용된 `number`타입은 버그를 잡기 위한 순수 TS 코드)

<br/>

때문에, 배열을 순회하는 방법에 있어 차이를 알아보자.

```tsx
const xs = [1, 2, 3]
console.log(xs['0']) // 에러 발생(인덱스 식이 number형식이 아닌 string이라 에러)
// 타입 시스템에서 string이 number에 할당될 수 없음

---

for(const key in xs) {
	key // string
	cosnt x = xs[key] // number
}
```

위의 같이 `for...in`에 사용되는 상황은 실용적인 허용이라고 생각하는 것이 좋다

또한, `for...in` 을 사용하는게 배열을 순회하기에 좋은 방법이 아니다.

- 따라서, 인덱스가 필요하지 않는 경우 `for...of` 를 사용하는 것이 좋다.
- 만약 인덱스가 필요한 경우, `forEach` 메서드를 사용하면 된다.
- 순회 중간에 멈춰야 하는 경우 `for(;;)` 방법을 사용하는 것이 좋다.
- 또, `for...in` 의 경우 일반적으로 다른 배열 순회 방법보다 몇 배나 느리다

<br/>

요약하면,

- 배열은 객체이므로 `key`는 숫자가 아닌 문자열이다. 인덱스 시그니처로 사용되는 `number`타입은 버그를 잡기 위한 타입스크립트의 코드이다.
- `number`를 인덱스 시그니처로 사용하기 보다, `Array`나 `튜플`, `ArrayLike` 타입을 사용하는 것이 좋다.
  - 일반적으로 `key` 자리에 `string` 대신 `number`를 타입으로 사용할 이유가 많지 않기 때문이다.
    - 이는 오히려 숫자 속성이 어떤 특별한 의미를 가지고 있다는 오해를 불러 일으킬 수 있다.
  - 또한, `push`, `concat`등 `Array` 메서드가 불필요하고, 인덱스와 길이등 일반적인 배열같은 정보만 필요한 경우 `ArrayLike`를 사용하는 것이 좋다
